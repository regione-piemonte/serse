<!--
 * @license
 *
 * Copyright © 2025 Regione Piemonte
 *
 * Licensed under the EUPL, Version 1.2 or – as soon they will be
 * approved by the European Commission - subsequent versions of the
 * EUPL (the "Licence");
 *
 * You may not use this work except in compliance with the Licence.
 * You may obtain a copy of the Licence at:
 *
 * https://interoperable-europe.ec.europa.eu/collection/eupl/eupl-text-eupl-12
 * or
 * https://opensource.org/license/EUPL-1.2
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the Licence is distributed on an "AS IS" basis,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the Licence for the specific language governing permissions and
 * limitations under the Licence.
 -->

<div class="container-fluid mt-2 zoomdiv" #parentElement>
  <!-- Row -->
  <div class="row p-0">
    <div class="col-xl-12 p-0">

      <!-- Search Section -->
      <div class="faq-search-wrap info-scelta shadow">
        <mat-card class="container">
          <mat-card-header>
            <mat-card-title class="d-flex">
              <h3>Come possiamo aiutarti?</h3>
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <mat-form-field class="w-100" appearance="legacy">
              <mat-label class="font-125">Domanda ?</mat-label>
              <input [formControl]="domandaForm" class="font-125" matInput>
              <mat-icon class="c-pointer" aria-label="fai una domanda" (click)="onSearchClick()" matSuffix>arrow_forward</mat-icon>
            </mat-form-field>

            <button class="btn btn--plain-text--primary"
                    mat-button
                    aria-label="scarica manuale pdf"
                    (click)="downloadPdf()">
              <mat-icon>picture_as_pdf</mat-icon>
              Scaricare il manuale
            </button>
          </mat-card-content>
        </mat-card>
      </div>
      <mat-divider></mat-divider>

      <div class="faq-search-wrap info-scelta shadow">
        <mat-card>
          <mat-card-header>
            <mat-card-title class="d-flex">
              <h5>Per che cosa ti serve assistenza ?</h5>
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
          <div class="row mb-5">
            <div class="categorie-container">

              <button
                      *ngFor="let categoria of categoriaList; index as i"
                      [ngClass]="{'btn-scheda-active' : i == indexActivated}"
                      (click)="setIndex(i)"
                      attr.aria-label="aiuto per {{categoria}}"
                      class="btn-scheda">

                <span class="icon-background" > <mat-icon svgIcon={{icons[i]}}></mat-icon> </span>
                <span class="label">{{categoria}}</span>
              </button>
            </div>
          </div>
          </mat-card-content>
        </mat-card>
      </div>

      <mat-divider></mat-divider>
      <app-guide #guida
        [categoria]="categoriaList[indexActivated]"
        [indice]="indice"
        (pannelliPronti)="pannelliPronti()">
      </app-guide>
    </div>
  </div>
  <!-- /Row -->
</div>
