<!--
 * @license
 *
 * Copyright © 2025 Regione Piemonte
 *
 * Licensed under the EUPL, Version 1.2 or – as soon they will be
 * approved by the European Commission - subsequent versions of the
 * EUPL (the "Licence");
 *
 * You may not use this work except in compliance with the Licence.
 * You may obtain a copy of the Licence at:
 *
 * https://interoperable-europe.ec.europa.eu/collection/eupl/eupl-text-eupl-12
 * or
 * https://opensource.org/license/EUPL-1.2
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the Licence is distributed on an "AS IS" basis,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the Licence for the specific language governing permissions and
 * limitations under the Licence.
 -->

<mat-toolbar class="z-10 position-relative shadow-lg">
  <mat-toolbar-row  class="mat-toolbar-row--first">
    <span class="title">
      <strong>SERSE <span *ngIf="!showTitleResponsive()">- Sistema di Erogazione Servizi</span></strong>
    </span>
    <span class="spacer"></span>

    <div class="container-header--second row">

      <div class="col-auto">
        <button mat-icon-button
                aria-label="aiuto"
                class="tool-bar-button"
                (click)="openHelp()"
                [matTooltip]="'Aiuto'">

        <mat-icon>help_outline</mat-icon>
        <span class="button-text">Aiuto</span>
        </button>
      </div>

      <div class="col-auto">
        <button mat-icon-button
                [matMenuTriggerFor] = "userInfoMenu"
                class="btn-user--menu">
          <!-- <mat-icon>person</mat-icon> -->
          {{userInfo?.cognome | firstWord}} {{userInfo?.nome | firstWord}}
          <!-- <mat-icon> keyboard_arrow_down</mat-icon> -->
        </button>
      </div>
      <mat-menu #userInfoMenu="matMenu" yPosition="below">
        <div class="m-2">
          <ul class="list-unstyled px-3">
            <li>
              {{userInfo?.codFisc}}
            </li>
            <li>
              {{ruolo}}
            </li>
            <li>
              {{operatore}}
            </li>
          </ul>
          <hr>
          <div class="px-3">
            <button
            aria-label="cambia operatore"
              class="btn btn--logout"
              (click)="clearStorage()"
              >
              Cambia Operatore
            </button>
            <button
            aria-label="logout"
              class="btn btn--logout"
              (click)="logOut()"
              >
              LogOut
            </button>
          </div>
        </div>
      </mat-menu>

    </div>
  </mat-toolbar-row>

  <mat-toolbar-row class="mat-toolbar-row--second">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-9">
          <h1 class="title-h1">
            <mat-icon
              *ngIf="icona !== 'home'"
              svgIcon={{icona}}
              class="icon-title"
              [ngClass]="{'me-4' : icona}"
              style="height: 50px;"></mat-icon>
            {{titolo == 'Home' && selectedMessage ? selectedMessage : titolo}}
          </h1>
        </div>
      </div>
    </div>
  </mat-toolbar-row>

</mat-toolbar>
